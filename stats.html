---
layout: default
title: ë…¼ë¬¸ í†µê³„ ëŒ€ì‹œë³´ë“œ
---
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/common.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>

<body>
    <button class="theme-toggle" id="themeToggle" title="ë‹¤í¬ ëª¨ë“œ í† ê¸€">ğŸŒ™</button>
    
    <div class="container">
        <a href="/index.html" class="home-link">â† ì˜¤ëŠ˜ì˜ ë…¼ë¬¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        
        <h1>ğŸ“Š ë…¼ë¬¸ í†µê³„ ëŒ€ì‹œë³´ë“œ</h1>

        {% assign cathode_archives = site.data.cathode.archive %}
        {% assign anode_archives = site.data.anode.archive %}
        {% assign cathode_today = site.data.cathode.today %}
        {% assign anode_today = site.data.anode.today %}

        {% comment %} ì§ì ‘ ì¹´ìš´íŠ¸í•˜ëŠ” ë°©ë²• ì‚¬ìš© {% endcomment %}
        {% assign cathode_archives_size = 0 %}
        {% if cathode_archives %}
            {% for paper in cathode_archives %}
                {% assign cathode_archives_size = cathode_archives_size | plus: 1 %}
            {% endfor %}
        {% endif %}

        {% assign anode_archives_size = 0 %}
        {% if anode_archives %}
            {% for paper in anode_archives %}
                {% assign anode_archives_size = anode_archives_size | plus: 1 %}
            {% endfor %}
        {% endif %}

        {% assign cathode_today_size = 0 %}
        {% if cathode_today %}
            {% for paper in cathode_today %}
                {% assign cathode_today_size = cathode_today_size | plus: 1 %}
            {% endfor %}
        {% endif %}

        {% assign anode_today_size = 0 %}
        {% if anode_today %}
            {% for paper in anode_today %}
                {% assign anode_today_size = anode_today_size | plus: 1 %}
            {% endfor %}
        {% endif %}

        {% assign total_cathode = cathode_archives_size | plus: cathode_today_size %}
        {% assign total_anode = anode_archives_size | plus: anode_today_size %}
        {% assign total_papers = total_cathode | plus: total_anode %}

        <div class="dashboard-container">
            <div class="dashboard-card">
                <h3>ì „ì²´ ë…¼ë¬¸ ìˆ˜</h3>
                <div class="value">{{ total_papers }}</div>
                <p>ì–‘ê·¹ì¬: {{ total_cathode }}ê°œ<br>ìŒê·¹ì¬: {{ total_anode }}ê°œ</p>
            </div>
            <div class="dashboard-card">
                <h3>ì˜¤ëŠ˜ì˜ ë…¼ë¬¸</h3>
                <div class="value">{{ cathode_today_size | plus: anode_today_size }}</div>
                <p>ì–‘ê·¹ì¬: {{ cathode_today_size }}ê°œ<br>ìŒê·¹ì¬: {{ anode_today_size }}ê°œ</p>
            </div>
            <div class="dashboard-card">
                <h3>ì•„ì¹´ì´ë¸Œ</h3>
                <div class="value">{{ cathode_archives_size | plus: anode_archives_size }}</div>
                <p>ì–‘ê·¹ì¬: {{ cathode_archives_size }}ê°œ<br>ìŒê·¹ì¬: {{ anode_archives_size }}ê°œ</p>
            </div>
        </div>

        <div class="chart-container">
            <h3>ì¹´í…Œê³ ë¦¬ë³„ ë…¼ë¬¸ ìˆ˜</h3>
            <canvas id="categoryChart" style="max-height: 300px;"></canvas>
        </div>

        <div class="chart-container" style="margin-top: 30px;">
            <h3>ì›”ë³„ ë…¼ë¬¸ ìˆ˜</h3>
            <canvas id="monthlyChart" style="max-height: 300px;"></canvas>
        </div>
    </div>

    <a href="#" id="scrollTopBtn" title="ë§¨ ìœ„ë¡œ ê°€ê¸°">Top â†‘</a>

    <script src="/assets/js/common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Chart.jsê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (typeof Chart === 'undefined') {
                console.error('Chart.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            const totalCathode = parseInt('{{ total_cathode }}') || 0;
            const totalAnode = parseInt('{{ total_anode }}') || 0;

            // ì¹´í…Œê³ ë¦¬ë³„ ì°¨íŠ¸
            const categoryCtx = document.getElementById('categoryChart');
            if (categoryCtx) {
                try {
                    new Chart(categoryCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['ì–‘ê·¹ì¬', 'ìŒê·¹ì¬'],
                            datasets: [{
                                data: [totalCathode, totalAnode],
                                backgroundColor: ['#3498db', '#e74c3c']
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('ì¹´í…Œê³ ë¦¬ ì°¨íŠ¸ ìƒì„± ì˜¤ë¥˜:', error);
                }
            }

            // ì›”ë³„ ë…¼ë¬¸ ìˆ˜ ì§‘ê³„
            const papers = [];
            
            {% if cathode_archives %}
            {% for paper in cathode_archives %}
            {% if paper.date %}
            papers.push('{{ paper.date }}');
            {% endif %}
            {% endfor %}
            {% endif %}
            
            {% if anode_archives %}
            {% for paper in anode_archives %}
            {% if paper.date %}
            papers.push('{{ paper.date }}');
            {% endif %}
            {% endfor %}
            {% endif %}
            
            {% if cathode_today %}
            {% for paper in cathode_today %}
            {% if paper.date %}
            papers.push('{{ paper.date }}');
            {% endif %}
            {% endfor %}
            {% endif %}
            
            {% if anode_today %}
            {% for paper in anode_today %}
            {% if paper.date %}
            papers.push('{{ paper.date }}');
            {% endif %}
            {% endfor %}
            {% endif %}

            const monthlyData = {};
            papers.forEach(date => {
                if (date && typeof date === 'string' && date.length >= 7) {
                    const month = date.substring(0, 7);
                    if (/^\d{4}-\d{2}$/.test(month)) {
                        monthlyData[month] = (monthlyData[month] || 0) + 1;
                    }
                }
            });

            const sortedMonths = Object.keys(monthlyData).sort();
            const monthlyLabels = sortedMonths.slice(-12); // ìµœê·¼ 12ê°œì›”
            const monthlyValues = monthlyLabels.map(m => monthlyData[m] || 0);

            // ì›”ë³„ ì°¨íŠ¸
            const monthlyCtx = document.getElementById('monthlyChart');
            if (monthlyCtx) {
                if (monthlyLabels.length > 0) {
                    try {
                        new Chart(monthlyCtx, {
                            type: 'bar',
                            data: {
                                labels: monthlyLabels,
                                datasets: [{
                                    label: 'ë…¼ë¬¸ ìˆ˜',
                                    data: monthlyValues,
                                    backgroundColor: '#3498db'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: true,
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        ticks: {
                                            stepSize: 1
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        display: false
                                    }
                                }
                            }
                        });
                    } catch (error) {
                        console.error('ì›”ë³„ ì°¨íŠ¸ ìƒì„± ì˜¤ë¥˜:', error);
                        monthlyCtx.parentElement.innerHTML += '<p style="color: #999; text-align: center;">ì°¨íŠ¸ë¥¼ í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                    }
                } else {
                    monthlyCtx.parentElement.innerHTML += '<p style="color: #999; text-align: center;">í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                }
            }
        });
    </script>
</body>

</html>

